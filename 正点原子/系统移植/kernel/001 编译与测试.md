# kernel的编译与测试

## 内核来源
- www.kernel.org
- 半导体厂商官方，比如NXP挑选一个版本的Linux内核，维护/测试

## NAT/桥接模式
- NAT模式用的是 Ubuntu 的是VMware 的虚拟子网(比如VMnet8 对应的 192.168.18.x)
- 桥接模式下，ubuntu直接接入物理网络，桥接模式的 Ubuntu + Windows（物理网卡） + 开发板，应该处于同一个物理网段，才可以ping通

## 编译内核
```bash
# 清理工程
make distclean

# 使用默认配置文件配置工程
make imx_v7_defconfig

# 打开配置界面，进行配置
sudo apt install libncurses5-dev libncursesw5-dev # 安装依赖
make menuconfig

# 编译
sudo apt install lzop
make -j4
```

## 测试
```bash
# 拷贝内核和设备树文件
cp arch/arm/boot/zImage -f ~/My_Linux/tftp
cp arch/arm/boot/dts/imx6ull-14x14-emmc-7-1024x600-c.dtb -f ~/My_Linux/tftp

# 通过tftp烧写
tftp 80800000 zImage
tftp 83000000 imx6ull-14x14-emmc-7-1024x600-c.dtb # arch/arm/configs

# 启动内核
bootz 80800000 - 83000000

```
