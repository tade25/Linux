# 向NXP官方添加自己的开发板

## 编译官方的kernel
```bash
# 清理工程
make distclean

# 使用默认配置文件配置工程
make imx_v7_mfg_defconfig

# 打开配置界面，进行配置
make menuconfig

# 编译
make -j4

# 通过tftp烧写

```

## 添加自己的开发板
```bash
# 复制xxx_defconfig
cp imx_v7_mfg_defconfig imx_tade_emmc_defconfig

# 复制设备树
cp imx6ull-14x14-evk.dts imx6ull-tade-emmc.dts

# 修改arch/arm/boot/dts/Makefile

# 通过tftp烧写

# 修改bootcmd，修改为通过tftp启动
setenv bootcmd 'tftp 80800000 zImage; tftp 83000000 imx6ull-tade-emmc.dtb; bootz 80800000 - 83000000;'
saveenv

# 修改bootargs
setenv bootargs 'console=ttymxc0,115200 root=/dev/mmcblk1p2 rootwait rw'
saveenv
```

## 修改主频
```bash
make menuconfig

CPU Power Management -> CPU Frequency scaling -> Default CPUFreq governor

```

## 使能8线EMMC
&usdhc2 {
    pinctrl-names = "default", "state_100mhz", "state_200mhz";
    pinctrl-0 = <&pinctrl_usdhc2_8bit>;
    pinctrl-1 = <&pinctrl_usdhc2_8bit_100mhz>;
    pinctrl-2 = <&pinctrl_usdhc2_8bit_200mhz>;
    bus-width = <8>;
    non-removable;
    status = "okay";
};

## 网络驱动修改
```bash
# 修改网络复位IO

# 修改fec1/2
&fec1 {
        pinctrl-names = "default";
        pinctrl-0 = <&pinctrl_enet1>;
        phy-mode = "rmii";
        phy-handle = <&ethphy0>;
        phy-reset-gpios = <&gpio5 7 GPIO_ACTIVE_LOW>;
        phy-reset-duration = <26>;
        status = "okay";
};

# 给开发板分配ip地址
ifconfig eth0 192.168.191.141

```
